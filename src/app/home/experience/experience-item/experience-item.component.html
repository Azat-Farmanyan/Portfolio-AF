<div class="experience-item">
  <div class="experience-card scroll-animate" #experienceCard>
    <!-- Timeline indicator -->
    <div class="timeline-indicator" appIntersectionObserver>
      <div class="timeline-line-wrapper">
        <div class="timeline-line" [class.last]="isLast">
          <div class="timeline-line-progress"></div>
          <div class="timeline-line-glow"></div>
        </div>
      </div>
      <div class="timeline-dot-wrapper">
        <div class="timeline-dot">
          <div class="timeline-dot-core"></div>
          <div class="timeline-dot-ring"></div>
          <div class="timeline-dot-pulse"></div>
        </div>
      </div>
    </div>

    <!-- Card content -->
    <div class="card-content">
      <!-- Header section -->
      <div class="card-header">
        <div class="header-top">
          <div class="company-info">
            <a
              [href]="experience.page"
              target="_blank"
              class="company-logo-wrapper"
              *ngIf="hasLogo"
            >
              <img
                class="company-logo"
                [src]="'../../../../assets/company-logos/' + experience.companyLogo"
                [alt]="experience.company"
              />
            </a>
            <div class="title-section">
              <h3 class="job-title">{{ experience.title }}</h3>
              <div class="company-name">
                <span class="company-text">{{ experience.company }}</span>
                <a [href]="experience.page" target="_blank" class="company-link">
                  {{ companyPage }}
                </a>
              </div>
            </div>
          </div>

          <!-- Date badge -->
          <div class="date-badge">
            <div class="date-range">
              <span class="date-from">{{ experience.date.from }}</span>
              <span class="date-separator">â€”</span>
              <span class="date-to">{{ experience.date.to }}</span>
            </div>
            <div class="duration-badge" *ngIf="experienceDuration">
              {{ experienceDuration }}
            </div>
          </div>
        </div>
      </div>

      <!-- Description section -->
      <div class="card-description">
        <div
          class="description-content"
          [class.expanded]="isExpanded"
          [class.collapsed]="!isExpanded"
        >
          <div class="description-items">
            <div
              *ngFor="let item of experienceItems; let i = index"
              class="description-item"
              [class.visible]="isExpanded || i < 3"
            >
              <div class="item-icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <circle
                    cx="8"
                    cy="8"
                    r="4"
                    fill="currentColor"
                  />
                </svg>
              </div>
              <div class="item-text" [innerHTML]="item"></div>
            </div>
          </div>
        </div>
        <button
          class="read-more-btn"
          *ngIf="showReadMore && experienceItems.length > 3"
          (click)="toggleDescription()"
          [attr.aria-expanded]="isExpanded"
        >
          <span *ngIf="!isExpanded">
            {{ readMoreText }}
          </span>
          <span *ngIf="isExpanded">
            {{ readLessText }}
          </span>
          <svg
            class="arrow-icon"
            [class.rotated]="isExpanded"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
          >
            <path
              d="M4 6L8 10L12 6"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>
