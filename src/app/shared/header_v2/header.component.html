<div (click)="closeMenu()" [@fadeInOut] *ngIf="showMenu" class="black-bg"></div>

<header
  class="header disable-text-select header-visible"
  [@fadeOutUpAndFadeInDown]
  [ngClass]="{
    'header-scrolled': scrolled,
    'lang-ru': currentLanguage === 'ru',
    'lang-en': currentLanguage === 'en'
  }"
>
  <div class="header-background" [style.opacity]="opacity"></div>

  <div class="wrapper">
    <div class="header-body">
      <div class="logo-container" (click)="navigateTo('home', 'home')">
        <div class="logo-char-block">
          <span class="logo-char char-a">A</span>
          <span class="logo-char char-f">F</span>
        </div>
      </div>

      <nav class="nav" *ngIf="!mobileView">
        <a
          class="nav-item"
          (click)="navigateTo('home', 'home')"
          [ngClass]="{ active: activeSection === 'home' }"
        >
          <span class="nav-text">{{ "header.home" | translate }}</span>
        </a>
        <a
          class="nav-item"
          (click)="navigateTo('home', 'about')"
          [ngClass]="{ active: activeSection === 'about' }"
        >
          <span class="nav-text">{{ "header.about" | translate }}</span>
        </a>
        <a
          class="nav-item"
          (click)="navigateTo('home', 'experience')"
          [ngClass]="{ active: activeSection === 'experience' }"
        >
          <span class="nav-text">{{ "header.experience" | translate }}</span>
        </a>
        <a
          class="nav-item"
          (click)="navigateTo('home', 'projects')"
          [ngClass]="{ active: activeSection === 'projects' }"
        >
          <span class="nav-text">{{ "header.projects" | translate }}</span>
        </a>
        <a
          class="nav-item"
          (click)="navigateTo('home', 'contact')"
          [ngClass]="{ active: activeSection === 'contact' }"
        >
          <span class="nav-text">{{ "header.contact" | translate }}</span>
        </a>
      </nav>

      <div class="header-actions">
        <button
          class="theme-toggle"
          (click)="themeService.toggleTheme()"
          [attr.aria-label]="themeService.isDarkMode() ? 'Switch to light mode' : 'Switch to dark mode'"
          [attr.aria-pressed]="themeService.isDarkMode()"
        >
          <svg *ngIf="!themeService.isDarkMode()" class="theme-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <svg *ngIf="themeService.isDarkMode()" class="theme-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <div
          class="language-switcher"
          (click)="switchLanguage()"
          [attr.aria-label]="'Switch language to ' + (currentLanguage === 'en' ? 'Russian' : 'English')"
          [ngClass]="{
            'lang-active-en': currentLanguage === 'en',
            'lang-active-ru': currentLanguage === 'ru'
          }"
        >
          <span class="lang-option" [ngClass]="{ 'active': currentLanguage === 'en' }">EN</span>
          <span class="lang-option" [ngClass]="{ 'active': currentLanguage === 'ru' }">RU</span>
          <span class="lang-slider"></span>
        </div>

        <button
          (click)="menuToggle()"
          class="burger-menu"
          [attr.aria-label]="showMenu ? 'Close menu' : 'Open menu'"
          [attr.aria-expanded]="showMenu"
        >
          <span class="burger-line" [ngClass]="{ 'open': showMenu }"></span>
          <span class="burger-line" [ngClass]="{ 'open': showMenu }"></span>
          <span class="burger-line" [ngClass]="{ 'open': showMenu }"></span>
        </button>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar-container">
      <div class="progress-bar" [style.width.%]="scrollProgress"></div>
    </div>
  </div>

  <div class="mobile-menu" [@dropDownMenu] *ngIf="showMenu">
    <div class="menu-background"></div>
    <div class="wrapper">
      <div class="menu-body">
        <nav class="menu-nav">
          <a
            class="menu-item"
            (click)="navigateTo('home', 'home')"
            [ngClass]="{ active: activeSection === 'home' }"
          >
            <span class="menu-item-text">{{ "header.home" | translate }}</span>
            <span class="menu-item-indicator" *ngIf="activeSection === 'home'"></span>
          </a>
          <a
            class="menu-item"
            (click)="navigateTo('home', 'about')"
            [ngClass]="{ active: activeSection === 'about' }"
          >
            <span class="menu-item-text">{{ "header.about" | translate }}</span>
            <span class="menu-item-indicator" *ngIf="activeSection === 'about'"></span>
          </a>
          <a
            class="menu-item"
            (click)="navigateTo('home', 'experience')"
            [ngClass]="{ active: activeSection === 'experience' }"
          >
            <span class="menu-item-text">{{ "header.experience" | translate }}</span>
            <span class="menu-item-indicator" *ngIf="activeSection === 'experience'"></span>
          </a>
          <a
            class="menu-item"
            (click)="navigateTo('home', 'projects')"
            [ngClass]="{ active: activeSection === 'projects' }"
          >
            <span class="menu-item-text">{{ "header.projects" | translate }}</span>
            <span class="menu-item-indicator" *ngIf="activeSection === 'projects'"></span>
          </a>
          <a
            class="menu-item"
            (click)="navigateTo('home', 'contact')"
            [ngClass]="{ active: activeSection === 'contact' }"
          >
            <span class="menu-item-text">{{ "header.contact" | translate }}</span>
            <span class="menu-item-indicator" *ngIf="activeSection === 'contact'"></span>
          </a>
        </nav>

        <div class="menu-actions">
          <button
            class="theme-toggle menu-theme-toggle"
            (click)="themeService.toggleTheme()"
            [attr.aria-label]="themeService.isDarkMode() ? 'Switch to light mode' : 'Switch to dark mode'"
            [attr.aria-pressed]="themeService.isDarkMode()"
          >
            <svg *ngIf="!themeService.isDarkMode()" class="theme-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <svg *ngIf="themeService.isDarkMode()" class="theme-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="theme-toggle-text">{{ themeService.isDarkMode() ? ('header.light_mode' | translate) : ('header.dark_mode' | translate) }}</span>
          </button>

          <div
            class="language-switcher menu-lang-switcher"
            (click)="switchLanguage()"
            [attr.aria-label]="'Switch language to ' + (currentLanguage === 'en' ? 'Russian' : 'English')"
            [ngClass]="{
              'lang-active-en': currentLanguage === 'en',
              'lang-active-ru': currentLanguage === 'ru'
            }"
          >
            <span class="lang-option" [ngClass]="{ 'active': currentLanguage === 'en' }">EN</span>
            <span class="lang-option" [ngClass]="{ 'active': currentLanguage === 'ru' }">RU</span>
            <span class="lang-slider"></span>
          </div>

          <button
            class="btn-orange-v2 menu-download-btn"
            (click)="downloadCV()"
          >
            <span>{{ "header.download_cv" | translate }}</span>
          </button>

          <div class="social-block">
            <div class="social-items">
              <a
                href="https://www.linkedin.com/in/azat-farmanyan/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="LinkedIn"
              >
                <img
                  class="social-item"
                  [src]="linkedinImageSrc"
                  alt="linkedin"
                  (mouseenter)="onMouseEnter('linkedin')"
                  (mouseleave)="onMouseLeave('linkedin')"
                />
              </a>
              <a
                href="https://github.com/Azat-Farmanyan"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="GitHub"
              >
                <img
                  class="social-item"
                  [src]="githubImageSrc"
                  alt="github"
                  (mouseenter)="onMouseEnter('github')"
                  (mouseleave)="onMouseLeave('github')"
                />
              </a>
              <a
                href="https://t.me/AzatFarmanyan"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Telegram"
              >
                <img
                  class="social-item"
                  [src]="telegramImageSrc"
                  alt="telegram"
                  (mouseenter)="onMouseEnter('telegram')"
                  (mouseleave)="onMouseLeave('telegram')"
                />
              </a>
              <a
                href="https://discordapp.com/users/908978735020146719/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Discord"
              >
                <img
                  class="social-item"
                  [src]="discordImageSrc"
                  alt="discord"
                  (mouseenter)="onMouseEnter('discord')"
                  (mouseleave)="onMouseLeave('discord')"
                />
              </a>
              <a
                href="https://www.instagram.com/azat_09.5/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Instagram"
              >
                <img
                  class="social-item"
                  [src]="instagramImageSrc"
                  alt="instagram"
                  (mouseenter)="onMouseEnter('instagram')"
                  (mouseleave)="onMouseLeave('instagram')"
                />
              </a>
              <a
                href="https://www.facebook.com/profile.php?id=100007929288834"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Facebook"
              >
                <img
                  class="social-item"
                  [src]="facebookImageSrc"
                  alt="facebook"
                  (mouseenter)="onMouseEnter('facebook')"
                  (mouseleave)="onMouseLeave('facebook')"
                />
              </a>
            </div>
          </div>

          <div class="menu-contact">
            <div class="contact-item">
              <span class="contact-label">Tel:</span>
              <a href="tel:+995592477775" class="contact-link">+995 592 47 77 75</a>
            </div>
            <div class="contact-item">
              <span class="contact-label">Email:</span>
              <a href="mailto:azat.farmanyan905@gmail.com" class="contact-link">azat.farmanyan905@gmail.com</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
